<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="#">
    <title>SLR</title>
    <link rel="shortcut icon" href="/static/ok.png" type="image/png">
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">

    <script type="text/javascript">
        var $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};

        var intervalID = setInterval(update_values, 1000);
        function update_values() {
            $.getJSON($SCRIPT_ROOT + '/_task-stuff',

          function(data) {
              console.log(data)
              if (!data.taskFinish){
                if (data.showTweet){
                    $('#tweet').text(data.tweet);
                    $('#tweet-area').show();
                    $('#vqa-area').hide();
                }
                else{
                    $('#img_path').attr('src',data.img_path);
                    $('#question').text(data.question);
                    $('#tweet-area').hide();
                    $('#vqa-area').show();
                }
                $('#response').text(data.sentence.toString());
              }
              else{
                $('#stop-area').show();
                $('#task-area').hide();
              }
          });
        };

        $(document).ready(function () {
            $("#start").submit(function(event){
                $('#start-area').hide();
                $('#click-here-region').hide();
                $('#task-area').show();
            });

            $("#stop").click(function(){
                clearInterval(intervalID);
                $('#stop-area').hide();
                $('#done-area').show();
            });
        });
    </script>

</head>
<body class="bg-dark" onload="update_values();">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
                integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
                crossorigin="anonymous"></script>
    <div class="container-fluid">
        <h1>Complete Annotation/Classification Task Using Sign Language</h1>

        <div class="container text-area">
            This task is a combination of two tasks, <strong>Visual Question Answering</strong>, and
            <strong>Tweet Sentiment Classification</strong>.
            In total there will be 15 sub-tasks, which will contain random sub-tasks from the two given categories
            of sub-tasks.
            For every sub-task, you will be given 10 seconds to provide your answer via Sign Language.
            During these 10 seconds you can answer the same sub-task multiple times.
            In total, completing the entire task should take around 2 minute 30 seconds.
            The input method for these tasks is Sign Language. For more details about the tasks,
            <a id="click" class="btn-link" data-bs-toggle="collapse" href="#click-here-region"
               role="button" aria-expanded="false" aria-controls="click-here-region">click here.</a>
            <br/>
            <div class="collapse" id="click-here-region">
                <div class="card-body">
                    <strong>Visual Question Answering</strong> -
                    In this task, a picture (from COCO dataset) will be shown to the worker.
                    Along with the picture, there will be a question regarding the picture
                    (like, 'Do you see a body of water in the picture?' ).
                    The answer to the question will be a YES, NO or MAYBE.
                    The answer from the worker will be captured via sign language.
                    <br/>
                    <strong>Tweet Sentiment Classification</strong> -
                    In this task, a text/tweet will be shown to the worker.
                    The worker will be required to assess the sentiment of the text/tweet
                    (like, "This time tomorrow...we'll have the Iron on. Iron Maiden pieces Drops tomorrow nights.")
                    by choosing one of POSITIVE, NEGATIVE or NEUTRAL options.
                    The answer will be captured by sign language.
                </div>
            </div>
        </div>

        {% if showButton %}
        <div id="start-area" style="margin-top: 5%;">
            <form method="post" action="/home">
                <div class="container col-md-4 d-grid">
                    <button class="btn btn-primary" type="submit" id="start">START</button>
                </div>
            </form>
        </div>
        {% else %}
        <div id="stop-area" style="margin-top: 2%; display: none;">
            <div class="container col-md-4 d-grid">
                <button class="btn btn-danger" type="button" id="stop">STOP</button>
            </div>
        </div>
        <div id="done-area" style="margin-top: 2%; display: none;">
            <div class="container col-md-4 d-grid">
                <button class="btn btn-success" id="done">DONE</button>
            </div>
        </div>
        <div id="task-area" class="task-area container-fluid">
            <div class="row">
                <div class="col">
                    <div id="tweet-area">
                        <div class="tweet bottom-left" id="tweet">{{ tweet }}</div>
                        <div class="question bottom-left">Do you think this statement is Positive,
                            Negative or Neutral?</div>
                    </div>
                    <div id="vqa-area">
                        <img id="img_path" src="{{ img_path }}" width="55%" height="60%" alt="Image to Answer."/>
                        <div class="question bottom-left" id="question"></div>
                    </div>
                </div>
                <!--<div class="col" id="stop-area">
                    <form method="post" action="/">
                        <div class="container col-md-4 d-grid">
                            <button class="btn btn-danger" type="submit" id="stop">STOP</button>
                        </div>
                    </form>
                </div>-->
                <div class="col">
                    <div class="video-capture">
                        <img src="{{url_for('video')}}" width="75%" alt="Video Capture"/>
                    </div>
                    <div class="pred_response">
                        Response: <div id="response"></div>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}

    </div>
</body>
</html>
